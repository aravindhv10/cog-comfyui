build:
  gpu: true
  cuda: "12.2"
  system_packages:
    - ffmpeg
  python_version: "3.10.12"
  #  python_version: "3.10.6"
  python_packages:
    - accelerate>=0.22.0
    - addict
    - aiohttp
    - bitsandbytes
    - black
    - cmake
    - cmake>=3.22.3    
    - color-matcher
    - Cython>=0.29.28
    - deepdiff
    - diffusers>=0.25.0
    - einops
    - filelock
    - fsspec>=2023.4.0
    - ftfy
    - fvcore
    - GitPython
    - huggingface-hub>0.20
    - imageio
    - importlib_metadata
    - insightface
    - joblib
    - kornia>=0.7.1
    - librosa
    - lpips
    - matplotlib
    - matrix-client==0.4.0
    - mediapipe
    - ninja
    - numba
    - numexpr
    - numpy>=1.22.3
    - omegaconf
    - onnx
    - openai-clip>=1.0.1
    - open-clip-torch>=2.23.0
    - opencv-python-headless>=4.0.1.24
    - pandas
    - piexif
    - pilgram
    - Pillow>=9.4.0
    - psutil
    - PyGithub
    - pynvml
    - python-dateutil
    - pytorch-lightning>=2.2.1
    - pyyaml
    - regex-spm
    # - rembg
    # RemBG causes Tiny_TerraNodes to take >40s to start
    - safetensors>=0.3.0
    - scikit-image
    - scikit-learn
    - scipy>=1.11.4
    - segment-anything
    - svglib
    - taming-transformers
    - timm
    - torch>=2.0.1
    - torchaudio
    - torchdiffeq
    - torchsde
    - torchvision
    - tqdm
    - transformers>=4.32.1
    - transparent-background
    - trimesh[easy]
    - ultralytics!=8.0.177
    # was-node-suite-comfyui
    - websocket-client==1.6.3
    - xformers==0.0.25
    - yacs
    - yapf
  run:
    - curl -o /usr/local/bin/pget -L "https://github.com/replicate/pget/releases/download/v0.6.0/pget_linux_x86_64" && chmod +x /usr/local/bin/pget
    - pip install onnxruntime-gpu --extra-index-url https://aiinfra.pkgs.visualstudio.com/PublicPackages/_packaging/onnxruntime-cuda-12/pypi/simple/
predict: "predict.py:Predictor"